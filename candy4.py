import streamlit as st

def calculate_geometric_term(first_term, common_ratio, n_th_term):
    """
    ë“±ë¹„ìˆ˜ì—´ì˜ në²ˆì§¸ í•­ì„ ê³„ì‚°í•˜ëŠ” í•¨ìˆ˜.
    ê³µì‹: a * r^(n-1)
    """
    # í•­ì˜ ë²ˆí˜¸ëŠ” 1 ì´ìƒì´ì–´ì•¼ í•¨
    if n_th_term <= 0:
        return "ì˜¤ë¥˜: í•­ì˜ ë²ˆí˜¸ëŠ” 1 ì´ìƒì˜ ì •ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤."
    
    # ë“±ë¹„ìˆ˜ì—´ì˜ në²ˆì§¸ í•­ ê³„ì‚°
    term_value = first_term * (common_ratio ** (n_th_term - 1))
    return term_value

# --- Streamlit ì•± ì¸í„°í˜ì´ìŠ¤ ì„¤ì • ---
st.set_page_config(
    page_title="ë“±ë¹„ìˆ˜ì—´ ê³„ì‚°ê¸°",
    page_icon="âœ¨",
    layout="centered" # í˜ì´ì§€ ë ˆì´ì•„ì›ƒì„ ì¤‘ì•™ìœ¼ë¡œ ì„¤ì •
)

st.title("ğŸŒŸ ë“±ë¹„ìˆ˜ì—´ì˜ në²ˆì§¸ í•­ ê³„ì‚°ê¸°")
st.write("ì²«ì§¸í•­ê³¼ ê³µë¹„ë¥¼ ì…ë ¥í•˜ê³ , ì•Œê³  ì‹¶ì€ í•­ì˜ ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ë©´ í•´ë‹¹ í•­ì˜ ê°’ì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.")

# --- ì‚¬ìš©ì ì…ë ¥ ìœ„ì ¯ ---
st.header("ì…ë ¥ ê°’")

# ì²«ì§¸í•­ ì…ë ¥ (ê¸°ë³¸ê°’ 1.0, ì†Œìˆ˜ì  ë‘ ìë¦¬ê¹Œì§€ í‘œì‹œ)
first_term = st.number_input(
    "**ì²«ì§¸í•­ (a)ì„ ì…ë ¥í•˜ì„¸ìš”:**",
    value=1.0,
    step=0.1,
    format="%.2f",
    help="ë“±ë¹„ìˆ˜ì—´ì˜ ì²« ë²ˆì§¸ í•­ì˜ ê°’ì…ë‹ˆë‹¤."
)

# ê³µë¹„ ì…ë ¥ (ê¸°ë³¸ê°’ 1.0, ì†Œìˆ˜ì  ë‘ ìë¦¬ê¹Œì§€ í‘œì‹œ)
common_ratio = st.number_input(
    "**ê³µë¹„ (r)ë¥¼ ì…ë ¥í•˜ì„¸ìš”:**",
    value=1.0,
    step=0.1,
    format="%.2f",
    help="ê° í•­ì— ê³±í•´ì§€ëŠ” ì¼ì •í•œ ë¹„ìœ¨ì…ë‹ˆë‹¤."
)

# ëª‡ ë²ˆì§¸ í•­ì¸ì§€ ì…ë ¥ (ìµœì†Œê°’ 1, ì •ìˆ˜ ë‹¨ìœ„)
n_th_term = st.number_input(
    "**ì•Œê³  ì‹¶ì€ í•­ì˜ ë²ˆí˜¸ (n)ë¥¼ ì…ë ¥í•˜ì„¸ìš”:**",
    min_value=1,
    value=1,
    step=1,
    help="ì•Œê³  ì‹¶ì€ í•­ì˜ ìˆœì„œ (ì˜ˆ: 1, 2, 3...)"
)

# --- ê³„ì‚° ë° ê²°ê³¼ ì¶œë ¥ ---
st.header("ê³„ì‚° ê²°ê³¼")

# 'ê³„ì‚°í•˜ê¸°' ë²„íŠ¼ì´ í´ë¦­ë  ë•Œë§Œ ê²°ê³¼ í‘œì‹œ
if st.button("ğŸš€ ê³„ì‚°í•˜ê¸°"):
    result = calculate_geometric_term(first_term, common_ratio, n_th_term)
    
    # ê²°ê³¼ê°€ ì˜¤ë¥˜ ë©”ì‹œì§€ì¸ ê²½ìš°
    if isinstance(result, str) and "ì˜¤ë¥˜" in result:
        st.error(result) # ë¹¨ê°„ìƒ‰ ì˜¤ë¥˜ ë©”ì‹œì§€ ì¶œë ¥
    else:
        # ì •ìƒì ì¸ ê²°ê³¼ì¸ ê²½ìš°
        st.success(f"ì…ë ¥í•˜ì‹  ë“±ë¹„ìˆ˜ì—´ì˜ **{int(n_th_term)}ë²ˆì§¸ í•­**ì˜ ê°’ì€: **{result:.4f}** ì…ë‹ˆë‹¤.")
        st.balloons() # ê³„ì‚° ì„±ê³µ ì‹œ í’ì„  ì• ë‹ˆë©”ì´ì…˜
        st.info("ğŸ’¡ ê³µì‹ì„ ìŠìœ¼ì…¨ë‚˜ìš”? ë“±ë¹„ìˆ˜ì—´ì˜ në²ˆì§¸ í•­ì€ $a \\cdot r^{n-1}$ ì…ë‹ˆë‹¤.")

st.markdown("---")
st.caption("Â© 2025 ë“±ë¹„ìˆ˜ì—´ ê³„ì‚°ê¸° by Gemini")
